# ListLang — Лабораторная работа №5

Этот проект представляет собой полный цикл реализации небольшого языка программирования **ListLang**, включающий:
- **лексический и синтаксический анализ** (ANTLR4),
- **семантический анализ**,
- **таблицу символов и систему типов**, 
- **кодогенерацию в WebAssembly Text (WAT)**.

Язык ориентирован на работу со списками, лямбда‑функциями, структурами данных и поддерживает как функциональные, так и императивные конструкции.

Для запуска синтаксического анализатора:

```bash
python .\syntax_analyzer.py
```

---

# Основные возможности языка

ListLang сочетает функциональный и императивный стиль, имеет неявное объявление переменных, многоцелевое присваивание и поддержку лямбд с замыканиями.

### Ключевые особенности
- Встроенные типы: `number`, `string`, `list`, `struct`, `lambda`, `bool`, `void`, `unknown`
- Перегрузка функций
- Поддержка параметров `out`
- Многоцелевое присваивание
- Лямбда‑функции как значения (передача, возврат, хранение в списках)
- WebAssembly Text (**WAT**) как целевой код

### Управляющие конструкции
- `if-then-else`
- `while`, `do-until`, `for`
- `switch-case`
- `break`, `continue`
- `return`

---

# Структура проекта

Проект включает несколько ключевых модулей:

### **1. syntax_analyzer.py**
Реализует:
- запуск ANTLR‑парсера,
- классы для обработки синтаксических ошибок:
  - `CustomSyntaxErrorListener`
  - `SyntaxErrorReporter`

### **2. semantic_analyzer.py**
Включает реализацию семантического анализа и систему типов:
- `ScopeType`
- `Type`
- `Parameter`
- `LambdaSignature`
- `VariableInfo`
- `FunctionInfo`
- `SymbolTable`
- `SemanticAnalyzer`

### **3. wat_compiler.py**
Отвечает за генерацию WAT‑кода:
- генерация секций памяти, глобальных переменных, функций,
- генерация лямбда‑функций как `call_indirect`,
- генерация строк, списков и структур в WebAssembly.

### **4. Грамматика ANTLR (ListLang.g4)**
Полная формальная спецификация синтаксиса языка.

---

# Генерируемые ошибки

ListLang поддерживает раздельное обнаружение **синтаксических** и **семантических** ошибок.

## Синтаксические ошибки
Выявляются ANTLR‑парсером.
Формат сообщений:
```
[filename] Ошибка синтаксиса: 'Токен' на строке N, столбце M — описание
```

## Семантические ошибки
Некоторые категории:
1. Неверное количество аргументов при вызове функции/лямбды
2. Вызов не‑функции
3. Использование необъявленной переменной
4. Несовместимость типов
5. Неверное использование встроенных функций
6. Повторное объявление переменной или функции
7. Неверное использование `out`
8. Ошибки множественного присваивания
9. `break`, `continue`, `return` вне контекста
10. Использование неинициализированной переменной
11. `out`‑аргумент не является переменной

---

# Краткое описание грамматики
Грамматика поддерживает:
- лексические правила для всех ключевых слов,
- выражения с правильными приоритетами,
- списки, структуры, лямбды,
- многоцелевые присваивания,
- управляющие конструкции,
- перегрузку функций.

---

# Примеры
Проект содержит примеры WAT‑кода:
- `example_1.wat`
- `example_2.wat`
- `example_3.wat`
- `add_example_4.wat`

---

# Запуск проекта

```bash
python .\syntax_analyzer.py
```

После запуска:
- производятся: лексический → синтаксический → семантический анализ,
- при отсутствии ошибок запускается генерация WAT‑кода.

---

# © Автор
Машкович В. Н. • БГУИР • 2025
